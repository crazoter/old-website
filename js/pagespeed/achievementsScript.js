var textbox;var avatar;var text;var lazymanCounter=0;var typerTimer;var escapeNext=false;var image1=new Image();image1.src="assets/mespeak.png";var image2=new Image();image2.src="assets/mespeak2.png";window.onload=function(){$('li.interactable').click(function(){var jThisData=$(this.children[0].children[0]).data();workClicked(jThisData);});$('#whatIwantToSay').click(function(){clearInterval(typerTimer);typingTime(true);});textbox=document.getElementById("whatIwantToSay");avatar=document.getElementById("meExpression");if(textbox!=null){textbox.innerHTML="";text="Click a thumbnail to see what I have to say about it!";typerTimer=setInterval(function(){typingTime()},20);}$('#preloader').fadeOut('slow',function(){$(this).remove();});}
function workClicked(jThisData){commentOnThis(jThisData.speech,jThisData.imgsrc);document.getElementById("details_name").innerHTML=jThisData.caption;document.getElementById("details_manpower").innerHTML=jThisData.manpower+" man team";document.getElementById("details_time").innerHTML=jThisData.time;document.getElementById("details_tools").innerHTML=jThisData.tools;$(textbox).addClass("clickable");}function commentOnThis(speech,imgsrc){if(textbox!=null){if(text!==speech){text=speech;avatar.src=imgsrc;textbox.innerHTML="";lazymanCounter=0;clearInterval(typerTimer);typerTimer=setInterval(function(){typingTime()},20);}else{clearInterval(typerTimer);typingTime(true);}}}function typingTime(looping){if(textbox!=null){if(!escapeNext){switch(text.charAt(lazymanCounter)){case'\\':escapeNext=true;break;case'#':textbox.innerHTML+="<br/>";break;case'^':var start=lazymanCounter+1;lazymanCounter=text.indexOf('$');textbox.innerHTML+=text.substring(start,lazymanCounter);break;default:textbox.innerHTML+=text.charAt(lazymanCounter);break;}}else{textbox.innerHTML+=text.charAt(lazymanCounter);escapeNext=false;}lazymanCounter++;if(lazymanCounter>=text.length){clearInterval(typerTimer);$(textbox).removeClass("clickable");}else if(looping)typingTime(true);}else{console.log('ERROR:cannot find textbox to print to');clearInterval(typerTimer);}}